<!-- hugo-template-aofuji | DSRKafuU <amzrk2.cc> | Copyright (c) Apache-2.0 License -->

<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="generator" content="Hugo 0.88.1" />

<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />
<link rel="manifest" href="/favicons/site.webmanifest" />
<link rel="shortcut icon" href="/favicons/favicon.ico" />

<title>è‡ªå·±æ­å»ºä¸€ä¸ªElectron &#43; React &#43; umi çš„é€šç”¨æ¨¡æ¿ - {...Life}</title><meta name="author" content="WannTonn" /><meta name="keywords" content="Electron" />
<meta property="og:title" content="è‡ªå·±æ­å»ºä¸€ä¸ªElectron &#43; React &#43; umi çš„é€šç”¨æ¨¡æ¿" />
<meta property="og:description" content="
å‰è¨€ï¼šæƒ³è‡ªå·±æ„å»ºä¸€ä¸ªé€šç”¨æ¨¡æ¿ã€‚å‡å»é‡å¤å¼€å‘å·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­å­¦ä¹ åˆ°æ›´å¤šçŸ¥è¯†ã€‚
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wanntonn.github.io/post/electron/create-a-demo-template/" />
<meta property="og:image" content="https://wanntonn.github.io/images/Post/Electron/bg.jpg" /><meta property="article:published_time" content="2022-03-06T11:30:45+08:00" />
<meta property="article:modified_time" content="2022-03-06T11:30:45+08:00" /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://wanntonn.github.io/images/Post/Electron/bg.jpg"/>
<meta name="twitter:title" content="è‡ªå·±æ­å»ºä¸€ä¸ªElectron &#43; React &#43; umi çš„é€šç”¨æ¨¡æ¿"/>
<meta name="twitter:description" content="
å‰è¨€ï¼šæƒ³è‡ªå·±æ„å»ºä¸€ä¸ªé€šç”¨æ¨¡æ¿ã€‚å‡å»é‡å¤å¼€å‘å·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­å­¦ä¹ åˆ°æ›´å¤šçŸ¥è¯†ã€‚
"/>



<link rel="stylesheet" href="/assets/amzrk2.css" />

<body data-theme="auto" data-section="single">
  <script>!function(t){let e;try{e=JSON.parse(localStorage.getItem("amzrk2-theme"))}catch(t){e=null}e&&e!==t&&document.body.setAttribute("data-theme",e)}(document.body.getAttribute("data-theme"));</script>
  <div id="top" style="height: 0; overflow: hidden;"></div>
  <header>
    <nav class="navbar">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://wanntonn.github.io">
        {...Life}
      </a>
    </div>

    <div class="navbar-menu">
      <div class="navbar-start">
        
        
        <a class="navbar-item "
           href="/post/">
          ç¬”è®°
        </a>
        
        <a class="navbar-item "
           href="/tags/">
          æ ‡ç­¾
        </a>
        
        <a class="navbar-item "
           href="/about/">
          å…³äºæˆ‘
        </a>
        
      </div>

      <div class="navbar-end">
        
        <div class="navbar-item" id="ctrl-adjust">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-adjust"></use>
          </svg>
        </div>
        <a class="navbar-item" id="ctrl-rss" href="/index.xml" target="_blank">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-rss"></use>
          </svg>
        </a>
        <div class="navbar-item" id="ctrl-toc">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-bars"></use>
          </svg>
        </div>
      </div>
    </div>
</nav>
  </header>
  <main>
    <div class="container single-container">
      <div class="columns single-columns">
        <div class="column single-content is-three-quarters">
          <div class="card">
            
            <div class="post-image image-wrapper ratio-40x9">
              <img src="/images/Post/Electron/bg.jpg" />
            </div>
            
            <div class="post-box">
              <h2 class="post-title">è‡ªå·±æ­å»ºä¸€ä¸ªElectron &#43; React &#43; umi çš„é€šç”¨æ¨¡æ¿</h2>
              <div class="post-meta">
                <span>
  <svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-calendar-day"></use>
  </svg>&nbsp;<time>2022-03-06</time></span>
<span>
  <svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-clock"></use>
  </svg>&nbsp;5 min</span>
<span>
  <svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-hashtag"></use>
  </svg>&nbsp;<a href="/tags/electron">Electron</a></span>
              </div>
            </div>
            <div class="post-content">
              <article class="markdown content">
                <blockquote>
<p>å‰è¨€ï¼šæƒ³è‡ªå·±æ„å»ºä¸€ä¸ªé€šç”¨æ¨¡æ¿ã€‚å‡å»é‡å¤å¼€å‘å·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­å­¦ä¹ åˆ°æ›´å¤šçŸ¥è¯†ã€‚</p>
</blockquote>
<h3 id="å…ˆä¸Šé“¾æ¥httpsgithubcomwanntonnelectron-umi-template">å…ˆä¸Š
<a href="https://github.com/WannTonn/electron-umi-template" target="_blank">é“¾æ¥</a>
</h3>
<h3 id="ä½¿ç”¨-umi-åˆ›å»º-react-é¡¹ç›®æ­¤å¤„ä¸º-macos-ç¯å¢ƒ">ä½¿ç”¨ Umi åˆ›å»º React é¡¹ç›®(æ­¤å¤„ä¸º MacOS ç¯å¢ƒ)</h3>
<pre><code class="language-bash">$ mkdir umi-demo  # åˆ›å»ºumi-demoæ–‡ä»¶å¤¹
$ cd umi-demo # åˆ°umi-demo æ–‡ä»¶å¤¹ä¸‹
$ yarn create umi # ç”¨yarn åˆ›å»ºumié¡¹ç›®, yarnçš„å®‰è£…æ–¹æ³•æ­¤å¤„ä¸åšè®¨è®º

$ [1/4] ğŸ”  Resolving packages...
warning create-umi &gt; sylvanas &gt; @umijs/fabric &gt; stylelint &gt; @stylelint/postcss-markdown@0.36.2: Use the original unforked package instead: postcss-markdown
warning create-umi &gt; yeoman-environment &gt; globby &gt; fast-glob &gt; micromatch &gt; snapdragon &gt; source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated
warning create-umi &gt; yeoman-environment &gt; globby &gt; fast-glob &gt; micromatch &gt; snapdragon &gt; source-map-resolve &gt; resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated
warning create-umi &gt; yeoman-environment &gt; globby &gt; fast-glob &gt; micromatch &gt; snapdragon &gt; source-map-resolve &gt; urix@0.1.0: Please see https://github.com/lydell/urix#deprecated
warning create-umi &gt; yeoman-environment &gt; globby &gt; fast-glob &gt; micromatch &gt; snapdragon &gt; source-map-resolve &gt; source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Installed &quot;create-umi@0.27.0&quot; with binaries:
      - create-umi

$ ? Select the boilerplate type app   # é€‰æ‹©æ¨¡æ¿ï¼Œæ­¤å¤„é€‰æ‹©äº†æ™®é€šappæ¨¡æ¿
? Do you want to use typescript? Yes  # å¯ç”¨typescript
? What functionality do you want to enable? # æ­¤å¤„é€‰æ‹©antd
   create package.json
   create src/assets/yay.jpg
   create .gitignore
   create .editorconfig
   create .env
   create .eslintrc
   create .prettierignore
   create .prettierrc
   create .umirc.ts
   create mock/.gitkeep
   create src/global.css
   create src/layouts/__tests__/index.test.tsx
   create src/layouts/index.css
   create src/layouts/index.tsx
   create src/pages/__tests__/index.test.tsx
   create src/pages/index.css
   create src/pages/index.tsx
   create tsconfig.json
   create typings.d.ts
âœ¨ File Generate Done
âœ¨  Done in 74.72s.
</code></pre>
<h3 id="å®‰è£…ä¾èµ–ä¸è¿è¡Œé¡¹ç›®">å®‰è£…ä¾èµ–ä¸è¿è¡Œé¡¹ç›®</h3>
<pre><code class="language-bash">$ yarn
yarn install v1.22.17
info No lockfile found.
[1/5] ğŸ”  Validating package.json...
[2/5] ğŸ”  Resolving packages...
warning babel-eslint@9.0.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.
...æ­¤å¤„çœç•¥Nè¡Œ
[5/5] ğŸ”¨  Building fresh packages...
success Saved lockfile.
âœ¨  Done in 89.98s.

$ yarn start
yarn run v1.22.17
$ umi dev

âœ” Webpack
  Compiled successfully in 3.56s

Starting the development server...

 DONE  Compiled successfully in 3566ms                                                                ä¸‹åˆ2:04:32


  App running at:
  - Local:   http://localhost:8000/ (copied to clipboard)
  - Network: http://10.100.8.41:8000/

 WAIT  Compiling...                                                                                   ä¸‹åˆ2:04:33


âœ” Webpack
  Compiled successfully in 166.94ms

 DONE  Compiled successfully in 168ms
</code></pre>
<p>è¿™é‡Œ umi é¡¹ç›®å°±å·²ç»å®‰è£…å¹¶æˆåŠŸè¿è¡Œäº†ã€‚</p>
<h3 id="å‡†å¤‡å®‰è£…-electron">å‡†å¤‡å®‰è£… Electron</h3>
<blockquote>
<p>åœ¨å®‰è£… Electron ä¹‹å‰ï¼Œå…ˆè°ƒæ•´é¡¹ç›®çš„ç›®å½•ï¼Œè¿™é‡Œåˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆè¦è°ƒæ•´é¡¹ç›®çš„ç›®å½•ä»¥åŠæ“ä½œä»¥ä¸‹åŠ¨ä½œã€‚</p>
<ol>
<li>ä¸ºäº†ä¼˜åŒ– Electron çš„å®‰è£…åŒ…çš„ä½“ç§¯ï¼Œ</li>
</ol>
</blockquote>
<ol>
<li>æŒ‰ä¸‹ <code>ctrl + c</code> ,å…ˆåœæ­¢æœ¬åœ°æœåŠ¡</li>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>renderer</code> æ–‡ä»¶å¤¹(å¯ä»¥ç†è§£ä¸º Electron ä¸­çš„æ¸²æŸ“è¿›ç¨‹)</li>
<li>å°†åˆšåˆšç”Ÿæˆçš„æ‰€æœ‰æ–‡ä»¶(<code>.gitignore</code>æ–‡ä»¶é™¤å¤–)ç§»åŠ¨åˆ°<code>renderer</code>æ–‡ä»¶å¤¹ä¸‹ã€‚</li>
<li>åœ¨é¡¹ç›®ä¸­åˆ›å»º<code>main</code>æ–‡ä»¶å¤¹(Electron é¡¹ç›®çš„ä¸»è¿›ç¨‹)</li>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>index.js</code></li>
<li>åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤</li>
</ol>
<ul>
<li>
<pre><code class="language-bash"> $ npm init (åˆå§‹åŒ–é¡¹ç›®ï¼Œç”¨äºå®‰è£…Electronï¼Œæ ¹æ®éœ€è¦åˆå§‹åŒ–)
</code></pre>
</li>
</ul>
<h4 id="å®‰è£…-electron">å®‰è£… Electron</h4>
<pre><code class="language-bash">$ yarn add electron -D
</code></pre>
<h4 id="é…ç½®mainmainjs-ä¸»è¿›ç¨‹å†…å®¹">é…ç½®<code>main/main.js</code> ä¸»è¿›ç¨‹å†…å®¹</h4>
<details><summary>ç‚¹å‡»æŸ¥çœ‹</summary>
<p>
<pre><code class="language-javascript">const {
  app,
  BrowserWindow,
  ipcMain,
  nativeTheme,
  Menu,
  MenuItem,
  Notification,
  globalShortcut,
  webContents,
  ipcRenderer,
} = require('electron');
const path = require('path');
const isMac = process.platform === 'darwin'; // å¦‚æœæ˜¯MacOS
const isWin = process.platform === 'win32'; // å¦‚æœæ˜¯Windows
const isDev = process.env.NODE_ENV === 'development';
const getRootPath = require('../rootPath');
let windowIdMap = {};
/**
 * @description åˆå§‹åŒ–åˆ›å»ºçª—å£
 * @param name çª—å£çš„åç§°
 */
function createWindow(name, option) {
  const mainWindow = new BrowserWindow({
    width: 1000,
    height: 800,
    webPreferences: {
      nodeIntegration: true,
      contextIsolation: true,
      webviewTag: true,
      enableRemoteModule: true,
      preload: path.join(getRootPath(), 'static', 'electron-preload.js'),
    },
  });
  windowIdMap[name] = mainWindow.webContents.id; // å°†çª—å£åç§°è®¾ç½®åˆ°map
  if (isDev) {
    mainWindow.loadURL('http://localhost:8000');
  } else {
    mainWindow.loadFile(path.join(getRootPath(), '/dist/index.html'));
  }
  mainWindow.webContents.openDevTools();
}
/**
 * @description é…ç½®èœå•,éœ€è¦å¼€å¯çš„è¯å°±å°†æ³¨é‡Šå»æ‰ï¼Œä¿®æ”¹å†…å®¹
 */
/* const menu = new Menu();
menu.append(new MenuItem({
  submenu: [{
    label: 'é€€å‡º',
    role: 'quit',
    accelerator: isMac ? 'Cmd+Q' : 'Alt+F4',
    click: () =&gt; { console.log('close app'); }
  }, {
    label: 'è€æ¿é”®',
    role: 'hide',
    accelerator: isMac ? 'Cmd+H' : 'Win+D'
  }]
})); */
// Menu.setApplicationMenu(menu);

/**
 * @description å¼¹ä¸€ä¸ªé€šçŸ¥
 */
function showNotification() {
  const NOTICE_TITLE = 'æˆåŠŸåˆå§‹åŒ–';
  const NOTICE_CONTENT = 'æ­å–œåˆå§‹åŒ–æˆåŠŸ';
  new Notification({ title: NOTICE_TITLE, body: NOTICE_CONTENT }).show();
}

/**
 * @description å½“æ˜¯MacOSçš„æ—¶å€™
 */
// åˆ‡æ¢æš—é»‘æ¨¡å¼
if (isMac) {
  ipcMain.handle('dark-mode:toggle', () =&gt; {
    nativeTheme.themeSource = nativeTheme.shouldUseDarkColors ? 'light' : 'dark';
    return nativeTheme.shouldUseDarkColors;
  });
  ipcMain.handle('dark-mode:system', () =&gt; {
    nativeTheme.themeSource = 'system';
  });
}

/**
 * @description ç»‘å®šä¸»è¿›ç¨‹å“åº”æ¸²æŸ“è¿›ç¨‹çš„é€šä¿¡
 */
ipcMain.on('login', (e, opt) =&gt; {
  let { msg, callback } = opt;
  console.log(msg, callback, opt);
  callback?.();
});

ipcMain.handle('toMain', (callBack) =&gt; {
  callBack?.();
  return 'æˆ‘æ˜¯mainçª—å£ï¼Œcreate window success';
});

/**
 * @description å½“electronåˆå§‹åŒ–å®Œæˆçš„æ—¶å€™
 */
app
  .whenReady()
  .then(async () =&gt; {
    globalShortcut.register('F12', () =&gt; {
      webContents.fromId(windowIdMap['default'])?.openDevTools();
    });
    createWindow('default');
  })
  .then(() =&gt; {
    isMac &amp;&amp; showNotification();
  });
/**
 * @description å½“æ²¡æœ‰çª—å£æ‰“å¼€æ—¶ï¼Œåˆ™æ‰“å¼€ä¸€ä¸ªæ–°çª—å£ï¼ˆMacOSï¼‰
 */
app.on('activate', function () {
  if (!BrowserWindow.getAllWindows().length) createWindow();
});
/**
 * @description å½“electronå…³é—­æ‰€æœ‰çª—å£æ—¶ï¼Œé€€å‡ºåº”ç”¨ã€‚
 */
app.on('mainWindow-all-closed', function () {
  if (isWin) app.quit();
});
</code></pre>
</p>
</details>
<h3 id="ä¿®æ”¹æ ¹ç›®å½•indexjs">ä¿®æ”¹æ ¹ç›®å½•<code>index.js</code></h3>
<pre><code class="language-javascript">require('./main/main.js');
</code></pre>
<h3 id="ä¿®æ”¹æ ¹ç›®å½•packagejson">ä¿®æ”¹æ ¹ç›®å½•<code>package.json</code></h3>
<pre><code class="language-json"># æ‰¾åˆ°scripts, æ·»åŠ startæŒ‡ä»¤
&quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
    &quot;start&quot;: &quot;electron .&quot;
},

</code></pre>
<h3 id="è¿è¡Œ-electron">è¿è¡Œ Electron</h3>
<pre><code class="language-bash">$ yarn start
</code></pre>
<h3 id="ç»†èŠ‚ä¿®æ”¹">ç»†èŠ‚ä¿®æ”¹</h3>
<blockquote>
<p>ç”±äº<code>main/main.js</code>æ˜¯ä¿®æ”¹è¿‡çš„ï¼Œå…¥å£å¢åŠ äº†æ˜¯å¦æ˜¯ development çš„åˆ¤æ–­(æ˜¯ï¼šæ‰“å¼€ http://localshost:8000, å¦ï¼šæ‰“å¼€ç¼–è¯‘å¥½çš„æ­£å¼åŒ…æ–‡ä»¶ä¸‹çš„ index.html)ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è°ƒæ•´<code>package.json</code>ï¼Œåœ¨<code>start</code>æŒ‡ä»¤ä¸­æ·»åŠ  ç›‘å¬ <code>http://localhost:8000</code> å¹¶å¯åŠ¨ Electron å®¢æˆ·ç«¯ã€‚
ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„<code>package.json</code></p>
</blockquote>
<pre><code class="language-json">&quot;scripts&quot;: {
  &quot;elt:dev&quot;: &quot;cross-env NODE_ENV=development electron .&quot;,
  &quot;start&quot;: &quot;concurrently \&quot;npm run start:app\&quot; \&quot;wait-on http://localhost:8000 &amp;&amp; npm run elt:dev\&quot;&quot;,
  &quot;start:app&quot;: &quot;cross-env APP_ROOT=./renderer umi dev&quot;
}
</code></pre>
<blockquote>
<p>åœ¨è¿è¡Œ <code>yarn start</code>ä¹‹å‰ï¼Œå…ˆå®‰è£…å¯¹åº”çš„ä¾èµ–ã€‚å› ä¸ºæŒ‡ä»¤ä¸­ç”¨åˆ°äº† 
<a href="https://www.npmjs.com/package/concurrently" target="_blank">concurrently</a>
 ä¸ 
<a href="https://www.npmjs.com/package/wait-on" target="_blank">wait-on</a>
ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…ä¾èµ–(éœ€è¦å®‰è£…åˆ°<code>devDependencies</code>ä¸‹ï¼Œå› ä¸ºåœ¨åç»­çš„æ‰“åŒ…ä¸­ï¼ŒElectron ä¸ä¼šå°†<code>devDependencies</code>ä¸‹çš„ä¾èµ–æ‰“åŒ…è¿›å»ã€‚è¿›è€Œä¼˜åŒ–æ•´ä½“ä½“ç§¯)ã€‚</p>
</blockquote>
<pre><code class="language-bash">$ yarn add wait-on concurrently -D
</code></pre>
<h3 id="å†æ¬¡è¿è¡Œ-electron">å†æ¬¡è¿è¡Œ Electron</h3>
<pre><code>$ yarn start

</code></pre>
<h3 id="å®‰è£…electron-builder">å®‰è£…<code>electron-builder</code></h3>
<pre><code class="language-bash">$ yarn add electron-builder
</code></pre>
<h3 id="æ·»åŠ electron-builderé…ç½®-æ–°å¢electron-builder-configjsåå­—éšæ„èµ·ä»…ä¾›å‚è€ƒå…·ä½“æŒ‰å®é™…åœºæ™¯ä¿®æ”¹">æ·»åŠ <code>electron-builder</code>é…ç½®, æ–°å¢<code>electron-builder-config.js</code>ï¼ˆåå­—éšæ„èµ·ï¼‰ã€‚ä»…ä¾›å‚è€ƒã€‚å…·ä½“æŒ‰å®é™…åœºæ™¯ä¿®æ”¹</h3>
<details><summary>ç‚¹å‡»æŸ¥çœ‹é…ç½®</summary>
<p>
<pre><code class="language-javascript">/**
 * @description
 * electron-builderé…ç½®æ–‡ä»¶ï¼Œ ä½¿ç”¨æ—¶é€šè¿‡npmscript æŒ‡å®š--config æ¥åŒ¹é…è¿è¡Œ
 * eg(å½“å‰)ï¼š elctron-builder --config .config/electron-build-config.js
 */

module.exports = {
  files: [
    // 'index.js', 'main/**/*', 'dist/**/*', 'node_modules/', 'package.json',
    '**/*',
    '!release/**/*',
    '!renderer/**/*',
    'dist/**/*',
    'static/**/*',
    '!src/**/*',
    // &quot;!main/**/*&quot;
  ],
  productName: 'demoApp',
  // æ³¨å…¥æ‰“åŒ…åpackage.json å†…çš„å±æ€§
  extraMetadata: {
    main: 'index.js',
  },
  directories: {
    output: 'release/${version}', // ç¼–è¯‘æ–‡ä»¶è¾“å‡ºæ–‡ä»¶å¤¹
  },
  // macæ‰“åŒ…é…ç½®
  mac: {
    // åŒ…ç±»å‹ï¼Œå‚è§ https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html#//apple_ref/doc/uid/TP40009250-SW8
    // category: 'public.app-category.developer-tools',
    type: 'development',
    target: ['default'], // ç›®æ ‡åŒ…ç±»å‹ï¼Œ
  },

  dmg: {
    // background: 'build/appdmg.png', // dmgå®‰è£…çª—å£èƒŒæ™¯å›¾
    // icon: 'public/icon.icns', // å®¢æˆ·ç«¯å›¾æ ‡
    iconSize: 100, // å®‰è£…å›¾æ ‡å¤§å°
    // å®‰è£…çª—å£ä¸­åŒ…å«çš„é¡¹ç›®å’Œé…ç½®
    contents: [
      { x: 380, y: 280, type: 'link', path: '/Applications' },
      { x: 110, y: 280, type: 'file' },
    ],
    window: { width: 500, height: 500 }, // å®‰è£…çª—å£å¤§å°
  },
  linux: {
    target: ['AppImage', 'deb'],
    icon: 'build/icon.png',
  },
  win: {
    target: ['nsis', 'portable', 'squirrel'],
    icon: 'public/icon.ico', // å®¢æˆ·ç«¯å›¾æ ‡
  },
  nsis: {
    shortcutName: 'demoApp', // å›¾æ ‡åç§°
    oneClick: false, // æ˜¯å¦ä¸€é”®å®‰è£…
    allowElevation: true, // å…è®¸è¯·æ±‚æå‡ã€‚ å¦‚æœä¸ºfalseï¼Œåˆ™ç”¨æˆ·å¿…é¡»ä½¿ç”¨æå‡çš„æƒé™é‡æ–°å¯åŠ¨å®‰è£…ç¨‹åºã€‚
    allowToChangeInstallationDirectory: true, // å…è®¸ä¿®æ”¹å®‰è£…ç›®å½•
    // installerIcon: &quot;./dist/public/icon.ico&quot;,// å®‰è£…å›¾æ ‡
    // uninstallerIcon: &quot;./dist/public/unist.ico&quot;,//å¸è½½å›¾æ ‡
    // installerHeaderIcon: &quot;./dist/public/icon.ico&quot;, // å®‰è£…æ—¶å¤´éƒ¨å›¾æ ‡
    createDesktopShortcut: true, // åˆ›å»ºæ¡Œé¢å›¾æ ‡
    createStartMenuShortcut: true, // åˆ›å»ºå¼€å§‹èœå•å›¾æ ‡
  },
  // asar: {
  //   smartUnpack: true,  // asaræ‰“åŒ…, æ™ºèƒ½æå–ç¬¬ä¸‰æ–¹æ¨¡å—
  // },
  // asar: false,
  /* 
  publish: [
    {
      provider: 'generic',
      url: 'http://localhost/release/',//æ›´æ–°æœåŠ¡å™¨åœ°å€,è¯·æŒ‰å®é™…éƒ¨ç½²ä¿®æ”¹
    },
  ], */
};
</code></pre>
</p>
</details>
<h3 id="ä¿®æ”¹packagejson">ä¿®æ”¹<code>package.json</code></h3>
<pre><code class="language-json"> &quot;scripts&quot;: {
    &quot;elt:dev&quot;: &quot;cross-env NODE_ENV=development electron .&quot;,
    &quot;start:app&quot;: &quot;cross-env APP_ROOT=./renderer umi dev&quot;,
    &quot;start&quot;: &quot;concurrently \&quot;npm run start:app\&quot; \&quot;wait-on http://localhost:8000 &amp;&amp; npm run elt:dev\&quot;&quot;,
    &quot;elt:dist&quot;: &quot;umi electron-builder -p never&quot;,
    &quot;build:app&quot;: &quot;cross-env APP_ROOT=./renderer umi build&quot;,
    &quot;elt:dist:all&quot;: &quot;cross-env ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ electron-builder -mwl --config ./electron-builder-config.js&quot;,
    &quot;elt:dist:mac&quot;: &quot;cross-env ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ electron-builder -m --config ./electron-builder-config.js&quot;,
    &quot;elt:dist:win&quot;: &quot;cross-env ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ electron-builder -w --config ./electron-builder-config.js&quot;,
    &quot;elt:dist:linux&quot;: &quot;cross-env ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ electron-builder -l --config ./electron-builder-config.js&quot;
  },
</code></pre>
<h3 id="æ‰§è¡Œç¼–è¯‘">æ‰§è¡Œç¼–è¯‘</h3>
<pre><code class="language-bash">$ yarn run elt:dist:mac
</code></pre>
<h3 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</h3>
<ol>
<li>åœ¨ç¼–è¯‘çš„æ—¶å€™æŠ¥ä»¥ä¸‹è¿™ä¸ªé”™
<code>Application entry file &quot;/Users/mac/zones/electron-umi-template/release/mac/electron-app-template.app/Contents/Resources/app/index.js&quot; does not exist. Seems like a wrong configuration.</code></li>
</ol>
<h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3>
<ol>
<li>æ€æ¥æƒ³å»ï¼Œå‘ç°æ˜¯æ–‡ä»¶å¤¹é‡åäº†ï¼ŒåŸæ¥æˆ‘çš„æ¸²æŸ“è¿›ç¨‹çš„æ–‡ä»¶å¤¹æ˜¯<code>app</code> ï¼Œè€Œ<code>electron-builder</code>æ‰“åŒ…å‡ºçš„å…¥å£æ–‡ä»¶å¤¹ä¹Ÿæ˜¯<code>app</code>ã€‚å°†æ–‡ä»¶å¤¹åå­—æ”¹æˆäº†<code>renderer</code>å°±è§£å†³äº†ã€‚</li>
</ol>
              </article>
            </div>
          </div>
        </div>
        <aside class="column single-sidebar is-one-quarter">
          <div class="card">
  <div class="card-info">
    <div class="avatar">
      <div class="image-wrapper ratio-1x1">
        <img src="/images/_avatar.jpg" />
      </div>
    </div>
    <div class="info">
      <span class="info-name">WannTonn</span>
      <span class="info-para">What is dead be never die</span>
    </div>
    <div class="counter">
      <div class="counter-wrapper">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <span class="counter-data">10</span>
        <span class="counter-name">kWords</span>
      </div>
      <div class="counter-wrapper">
        <span class="counter-data">7</span>
        <span class="counter-name">Tags</span>
      </div>
      <div class="counter-wrapper">
        <span class="counter-data">18</span>
        <span class="counter-name">Posts</span>
      </div>
    </div>
  </div>
</div>
          <div class="sticky">
            
            <div class="card toc hidden" id="table-of-contents">
              <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#å…ˆä¸Šé“¾æ¥httpsgithubcomwanntonnelectron-umi-template">å…ˆä¸Š<a href="https://github.com/WannTonn/electron-umi-template">é“¾æ¥</a></a></li>
        <li><a href="#ä½¿ç”¨-umi-åˆ›å»º-react-é¡¹ç›®æ­¤å¤„ä¸º-macos-ç¯å¢ƒ">ä½¿ç”¨ Umi åˆ›å»º React é¡¹ç›®(æ­¤å¤„ä¸º MacOS ç¯å¢ƒ)</a></li>
        <li><a href="#å®‰è£…ä¾èµ–ä¸è¿è¡Œé¡¹ç›®">å®‰è£…ä¾èµ–ä¸è¿è¡Œé¡¹ç›®</a></li>
        <li><a href="#å‡†å¤‡å®‰è£…-electron">å‡†å¤‡å®‰è£… Electron</a></li>
        <li><a href="#ä¿®æ”¹æ ¹ç›®å½•indexjs">ä¿®æ”¹æ ¹ç›®å½•<code>index.js</code></a></li>
        <li><a href="#ä¿®æ”¹æ ¹ç›®å½•packagejson">ä¿®æ”¹æ ¹ç›®å½•<code>package.json</code></a></li>
        <li><a href="#è¿è¡Œ-electron">è¿è¡Œ Electron</a></li>
        <li><a href="#ç»†èŠ‚ä¿®æ”¹">ç»†èŠ‚ä¿®æ”¹</a></li>
        <li><a href="#å†æ¬¡è¿è¡Œ-electron">å†æ¬¡è¿è¡Œ Electron</a></li>
        <li><a href="#å®‰è£…electron-builder">å®‰è£…<code>electron-builder</code></a></li>
        <li><a href="#æ·»åŠ electron-builderé…ç½®-æ–°å¢electron-builder-configjsåå­—éšæ„èµ·ä»…ä¾›å‚è€ƒå…·ä½“æŒ‰å®é™…åœºæ™¯ä¿®æ”¹">æ·»åŠ <code>electron-builder</code>é…ç½®, æ–°å¢<code>electron-builder-config.js</code>ï¼ˆåå­—éšæ„èµ·ï¼‰ã€‚ä»…ä¾›å‚è€ƒã€‚å…·ä½“æŒ‰å®é™…åœºæ™¯ä¿®æ”¹</a></li>
        <li><a href="#ä¿®æ”¹packagejson">ä¿®æ”¹<code>package.json</code></a></li>
        <li><a href="#æ‰§è¡Œç¼–è¯‘">æ‰§è¡Œç¼–è¯‘</a></li>
        <li><a href="#é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</a></li>
        <li><a href="#è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</a></li>
      </ul>
    </li>
  </ul>
</nav>
            </div>
            
          </div>
        </aside>
      </div>
    </div>
  </main>
  <footer class="footer">
  <div class="container">
    <span>Copyright &copy; 2020-2022 WannTonn</span>
    <span>Original theme <a href="https://github.com/amzrk2/hugo-template-aofuji"
         target="_blank">Aofuji</a> with Apache-2.0 license</span>
  </div>
</footer>
  


<script defer src="/assets/amzrk2-common.js"></script>

  



<script defer src="/assets/amzrk2-single.js"></script>


<script defer
        src="https://cdn.jsdelivr.net/npm/prismjs@1.21.0/components/prism-core.min.js"></script>
<script defer
        src="https://cdn.jsdelivr.net/npm/prismjs@1.21.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>


</html>