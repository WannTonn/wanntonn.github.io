<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=HandheldFriendly content="True"><meta http-equiv=x-ua-compatible content="IE=edge"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=generator content="Hugo 0.110.0"><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=manifest href=/favicons/site.webmanifest><link rel="shortcut icon" href=/favicons/favicon.ico><title>è‡ªå·±æ­å»ºä¸€ä¸ªElectron + React + umi çš„é€šç”¨æ¨¡æ¿ - {...Life}</title><meta name=author content="WannTonn"><meta name=keywords content="Electron"><meta property="og:title" content="è‡ªå·±æ­å»ºä¸€ä¸ªElectron + React + umi çš„é€šç”¨æ¨¡æ¿"><meta property="og:description" content="
å‰è¨€ï¼šæƒ³è‡ªå·±æ„å»ºä¸€ä¸ªé€šç”¨æ¨¡æ¿ã€‚å‡å»é‡å¤å¼€å‘å·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­å­¦ä¹ åˆ°æ›´å¤šçŸ¥è¯†ã€‚
"><meta property="og:type" content="article"><meta property="og:url" content="https://blogs.wanntonn.fun/fed/electron/create-a-demo-template/"><meta property="og:image" content="https://blogs.wanntonn.fun/images/Post/Electron/bg.jpg"><meta property="article:published_time" content="2022-03-06T11:30:45+08:00"><meta property="article:modified_time" content="2022-03-06T11:30:45+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blogs.wanntonn.fun/images/Post/Electron/bg.jpg"><meta name=twitter:title content="è‡ªå·±æ­å»ºä¸€ä¸ªElectron + React + umi çš„é€šç”¨æ¨¡æ¿"><meta name=twitter:description content="
å‰è¨€ï¼šæƒ³è‡ªå·±æ„å»ºä¸€ä¸ªé€šç”¨æ¨¡æ¿ã€‚å‡å»é‡å¤å¼€å‘å·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­å­¦ä¹ åˆ°æ›´å¤šçŸ¥è¯†ã€‚
"><link rel=stylesheet href=/assets/amzrk2.min.css><script></script><body data-theme=auto data-section=single><script>!function(e){let t;try{t=JSON.parse(localStorage.getItem("amzrk2-theme"))}catch{t=null}t&&t!==e&&document.body.setAttribute("data-theme",t)}(document.body.getAttribute("data-theme"))</script><div id=top style=height:0;overflow:hidden></div><header><nav class=navbar><div class=container><div class=navbar-brand><a class=navbar-item href=https://blogs.wanntonn.fun>{...Life}</a></div><div class=navbar-menu><div class=navbar-start><a class=navbar-item href=/post/>ç¬”è®°</a>
<a class=navbar-item href=/fed/>å‰ç«¯</a>
<a class=navbar-item href=/hackintosh/>Hackintosh</a>
<a class=navbar-item href=/tags/>æ ‡ç­¾</a>
<a class=navbar-item href=/about/>å…³äº</a></div><div class=navbar-end><div class=navbar-item id=ctrl-adjust><svg class="icon" aria-hidden="true"><use xlink:href="#icon-adjust"/></svg></div><a class=navbar-item id=ctrl-rss href=/%20/index.xml target=_blank><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss"/></svg></a><div class=navbar-item id=ctrl-toc><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bars"/></svg></div></div></div></nav></header><main><div class="container single-container"><div class="columns single-columns"><div class="column single-content is-three-quarters"><div class=card><div class="post-image image-wrapper ratio-32x9"><img src=/images/Post/Electron/bg.jpg></div><div class=post-box><h2 class=post-title>è‡ªå·±æ­å»ºä¸€ä¸ªElectron + React + umi çš„é€šç”¨æ¨¡æ¿</h2><div class=post-meta><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-day"/></svg>&nbsp;<time>2022-03-06</time></span>
<span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clock"/></svg>&nbsp;5 min</span>
<span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hashtag"/></svg>&nbsp;<a href=/tags/electron>Electron</a></span></div></div><div class=post-content><article class="markdown content"><blockquote><p>å‰è¨€ï¼šæƒ³è‡ªå·±æ„å»ºä¸€ä¸ªé€šç”¨æ¨¡æ¿ã€‚å‡å»é‡å¤å¼€å‘å·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­å­¦ä¹ åˆ°æ›´å¤šçŸ¥è¯†ã€‚</p></blockquote><p><a href=https://github.com/WannTonn/electron-umi-template target=_blank>å…ˆä¸Šé“¾æ¥</a></p><h3 id=ä½¿ç”¨-umi-åˆ›å»º-react-é¡¹ç›®æ­¤å¤„ä¸º-macos-ç¯å¢ƒ>ä½¿ç”¨ Umi åˆ›å»º React é¡¹ç›®(æ­¤å¤„ä¸º MacOS ç¯å¢ƒ)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>$ mkdir umi-demo  <span style=color:#75715e># åˆ›å»ºumi-demoæ–‡ä»¶å¤¹</span>
</span></span><span style=display:flex><span>$ cd umi-demo <span style=color:#75715e># åˆ°umi-demo æ–‡ä»¶å¤¹ä¸‹</span>
</span></span><span style=display:flex><span>$ yarn create umi <span style=color:#75715e># ç”¨yarn åˆ›å»ºumié¡¹ç›®, yarnçš„å®‰è£…æ–¹æ³•æ­¤å¤„ä¸åšè®¨è®º</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ <span style=color:#f92672>[</span>1/4<span style=color:#f92672>]</span> ğŸ”  Resolving packages...
</span></span><span style=display:flex><span>warning create-umi &gt; sylvanas &gt; @umijs/fabric &gt; stylelint &gt; @stylelint/postcss-markdown@0.36.2: Use the original unforked package instead: postcss-markdown
</span></span><span style=display:flex><span>warning create-umi &gt; yeoman-environment &gt; globby &gt; fast-glob &gt; micromatch &gt; snapdragon &gt; source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated
</span></span><span style=display:flex><span>warning create-umi &gt; yeoman-environment &gt; globby &gt; fast-glob &gt; micromatch &gt; snapdragon &gt; source-map-resolve &gt; resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated
</span></span><span style=display:flex><span>warning create-umi &gt; yeoman-environment &gt; globby &gt; fast-glob &gt; micromatch &gt; snapdragon &gt; source-map-resolve &gt; urix@0.1.0: Please see https://github.com/lydell/urix#deprecated
</span></span><span style=display:flex><span>warning create-umi &gt; yeoman-environment &gt; globby &gt; fast-glob &gt; micromatch &gt; snapdragon &gt; source-map-resolve &gt; source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>2/4<span style=color:#f92672>]</span> ğŸšš  Fetching packages...
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>3/4<span style=color:#f92672>]</span> ğŸ”—  Linking dependencies...
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>4/4<span style=color:#f92672>]</span> ğŸ”¨  Building fresh packages...
</span></span><span style=display:flex><span>success Installed <span style=color:#e6db74>&#34;create-umi@0.27.0&#34;</span> with binaries:
</span></span><span style=display:flex><span>      - create-umi
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ ? Select the boilerplate type app   <span style=color:#75715e># é€‰æ‹©æ¨¡æ¿ï¼Œæ­¤å¤„é€‰æ‹©äº†æ™®é€šappæ¨¡æ¿</span>
</span></span><span style=display:flex><span>? Do you want to use typescript? Yes  <span style=color:#75715e># å¯ç”¨typescript</span>
</span></span><span style=display:flex><span>? What functionality <span style=color:#66d9ef>do</span> you want to enable? <span style=color:#75715e># æ­¤å¤„é€‰æ‹©antd</span>
</span></span><span style=display:flex><span>   create package.json
</span></span><span style=display:flex><span>   create src/assets/yay.jpg
</span></span><span style=display:flex><span>   create .gitignore
</span></span><span style=display:flex><span>   create .editorconfig
</span></span><span style=display:flex><span>   create .env
</span></span><span style=display:flex><span>   create .eslintrc
</span></span><span style=display:flex><span>   create .prettierignore
</span></span><span style=display:flex><span>   create .prettierrc
</span></span><span style=display:flex><span>   create .umirc.ts
</span></span><span style=display:flex><span>   create mock/.gitkeep
</span></span><span style=display:flex><span>   create src/global.css
</span></span><span style=display:flex><span>   create src/layouts/__tests__/index.test.tsx
</span></span><span style=display:flex><span>   create src/layouts/index.css
</span></span><span style=display:flex><span>   create src/layouts/index.tsx
</span></span><span style=display:flex><span>   create src/pages/__tests__/index.test.tsx
</span></span><span style=display:flex><span>   create src/pages/index.css
</span></span><span style=display:flex><span>   create src/pages/index.tsx
</span></span><span style=display:flex><span>   create tsconfig.json
</span></span><span style=display:flex><span>   create typings.d.ts
</span></span><span style=display:flex><span>âœ¨ File Generate Done
</span></span><span style=display:flex><span>âœ¨  Done in 74.72s.
</span></span></code></pre></div><h3 id=å®‰è£…ä¾èµ–ä¸è¿è¡Œé¡¹ç›®>å®‰è£…ä¾èµ–ä¸è¿è¡Œé¡¹ç›®</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>$ yarn
</span></span><span style=display:flex><span>yarn install v1.22.17
</span></span><span style=display:flex><span>info No lockfile found.
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>1/5<span style=color:#f92672>]</span> ğŸ”  Validating package.json...
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>2/5<span style=color:#f92672>]</span> ğŸ”  Resolving packages...
</span></span><span style=display:flex><span>warning babel-eslint@9.0.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.
</span></span><span style=display:flex><span>...æ­¤å¤„çœç•¥Nè¡Œ
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>5/5<span style=color:#f92672>]</span> ğŸ”¨  Building fresh packages...
</span></span><span style=display:flex><span>success Saved lockfile.
</span></span><span style=display:flex><span>âœ¨  Done in 89.98s.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ yarn start
</span></span><span style=display:flex><span>yarn run v1.22.17
</span></span><span style=display:flex><span>$ umi dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>âœ” Webpack
</span></span><span style=display:flex><span>  Compiled successfully in 3.56s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Starting the development server...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> DONE  Compiled successfully in 3566ms
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  App running at:
</span></span><span style=display:flex><span>  - Local:   http://localhost:8000/ <span style=color:#f92672>(</span>copied to clipboard<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  - Network: http://10.100.8.41:8000/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> WAIT  Compiling...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>âœ” Webpack
</span></span><span style=display:flex><span>  Compiled successfully in 166.94ms
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> DONE  Compiled successfully in 168ms
</span></span></code></pre></div><p>è¿™é‡Œ umi é¡¹ç›®å°±å·²ç»å®‰è£…å¹¶æˆåŠŸè¿è¡Œäº†ã€‚</p><h3 id=å‡†å¤‡å®‰è£…-electron>å‡†å¤‡å®‰è£… Electron</h3><blockquote><p>åœ¨å®‰è£… Electron ä¹‹å‰ï¼Œå…ˆè°ƒæ•´é¡¹ç›®çš„ç›®å½•ï¼Œè¿™é‡Œåˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆè¦è°ƒæ•´é¡¹ç›®çš„ç›®å½•ä»¥åŠæ“ä½œä»¥ä¸‹åŠ¨ä½œã€‚</p><ol><li>ä¸ºäº†ä¼˜åŒ– Electron çš„å®‰è£…åŒ…çš„ä½“ç§¯ï¼Œ</li></ol></blockquote><ol><li>æŒ‰ä¸‹ <code>ctrl + c</code> ,å…ˆåœæ­¢æœ¬åœ°æœåŠ¡</li><li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>renderer</code> æ–‡ä»¶å¤¹(å¯ä»¥ç†è§£ä¸º Electron ä¸­çš„æ¸²æŸ“è¿›ç¨‹)</li><li>å°†åˆšåˆšç”Ÿæˆçš„æ‰€æœ‰æ–‡ä»¶(<code>.gitignore</code>æ–‡ä»¶é™¤å¤–)ç§»åŠ¨åˆ°<code>renderer</code>æ–‡ä»¶å¤¹ä¸‹ã€‚</li><li>åœ¨é¡¹ç›®ä¸­åˆ›å»º<code>main</code>æ–‡ä»¶å¤¹(Electron é¡¹ç›®çš„ä¸»è¿›ç¨‹)</li><li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>index.js</code></li><li>åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>  $ npm init <span style=color:#f92672>(</span>åˆå§‹åŒ–é¡¹ç›®ï¼Œç”¨äºå®‰è£…Electronï¼Œæ ¹æ®éœ€è¦åˆå§‹åŒ–<span style=color:#f92672>)</span>
</span></span></code></pre></div><h4 id=å®‰è£…-electron>å®‰è£… Electron</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>$ yarn add electron -D
</span></span></code></pre></div><h4 id=é…ç½®mainmainjs-ä¸»è¿›ç¨‹å†…å®¹>é…ç½®<code>main/main.js</code> ä¸»è¿›ç¨‹å†…å®¹</h4><details><summary>ç‚¹å‡»æŸ¥çœ‹</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>app</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>BrowserWindow</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ipcMain</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>nativeTheme</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Menu</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MenuItem</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Notification</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>globalShortcut</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>webContents</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ipcRenderer</span>,
</span></span><span style=display:flex><span>} <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;electron&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;path&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isMac</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>platform</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;darwin&#39;</span>; <span style=color:#75715e>// å¦‚æœæ˜¯MacOS
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isWin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>platform</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;win32&#39;</span>; <span style=color:#75715e>// å¦‚æœæ˜¯Windows
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isDev</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>NODE_ENV</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;development&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getRootPath</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;../rootPath&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>windowIdMap</span> <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @description åˆå§‹åŒ–åˆ›å»ºçª—å£
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param name çª—å£çš„åç§°
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createWindow</span>(<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>option</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>mainWindow</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BrowserWindow</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1000</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>800</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>webPreferences</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>nodeIntegration</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>contextIsolation</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>webviewTag</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>enableRemoteModule</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>preload</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>join</span>(<span style=color:#a6e22e>getRootPath</span>(), <span style=color:#e6db74>&#39;static&#39;</span>, <span style=color:#e6db74>&#39;electron-preload.js&#39;</span>),
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>windowIdMap</span>[<span style=color:#a6e22e>name</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>mainWindow</span>.<span style=color:#a6e22e>webContents</span>.<span style=color:#a6e22e>id</span>; <span style=color:#75715e>// å°†çª—å£åç§°è®¾ç½®åˆ°map
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isDev</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mainWindow</span>.<span style=color:#a6e22e>loadURL</span>(<span style=color:#e6db74>&#39;http://localhost:8000&#39;</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mainWindow</span>.<span style=color:#a6e22e>loadFile</span>(<span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>join</span>(<span style=color:#a6e22e>getRootPath</span>(), <span style=color:#e6db74>&#39;/dist/index.html&#39;</span>));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mainWindow</span>.<span style=color:#a6e22e>webContents</span>.<span style=color:#a6e22e>openDevTools</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @description é…ç½®èœå•,éœ€è¦å¼€å¯çš„è¯å°±å°†æ³¨é‡Šå»æ‰ï¼Œä¿®æ”¹å†…å®¹
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* const menu = new Menu();
</span></span></span><span style=display:flex><span><span style=color:#75715e>menu.append(new MenuItem({
</span></span></span><span style=display:flex><span><span style=color:#75715e>  submenu: [{
</span></span></span><span style=display:flex><span><span style=color:#75715e>    label: &#39;é€€å‡º&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    role: &#39;quit&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    accelerator: isMac ? &#39;Cmd+Q&#39; : &#39;Alt+F4&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    click: () =&gt; { console.log(&#39;close app&#39;); }
</span></span></span><span style=display:flex><span><span style=color:#75715e>  }, {
</span></span></span><span style=display:flex><span><span style=color:#75715e>    label: &#39;è€æ¿é”®&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    role: &#39;hide&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    accelerator: isMac ? &#39;Cmd+H&#39; : &#39;Win+D&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>  }]
</span></span></span><span style=display:flex><span><span style=color:#75715e>})); */</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Menu.setApplicationMenu(menu);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @description å¼¹ä¸€ä¸ªé€šçŸ¥
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>showNotification</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>NOTICE_TITLE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;æˆåŠŸåˆå§‹åŒ–&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>NOTICE_CONTENT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;æ­å–œåˆå§‹åŒ–æˆåŠŸ&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Notification</span>({ <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>NOTICE_TITLE</span>, <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>NOTICE_CONTENT</span> }).<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @description å½“æ˜¯MacOSçš„æ—¶å€™
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// åˆ‡æ¢æš—é»‘æ¨¡å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isMac</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ipcMain</span>.<span style=color:#a6e22e>handle</span>(<span style=color:#e6db74>&#39;dark-mode:toggle&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>nativeTheme</span>.<span style=color:#a6e22e>themeSource</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>nativeTheme</span>.<span style=color:#a6e22e>shouldUseDarkColors</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;light&#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;dark&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>nativeTheme</span>.<span style=color:#a6e22e>shouldUseDarkColors</span>;
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ipcMain</span>.<span style=color:#a6e22e>handle</span>(<span style=color:#e6db74>&#39;dark-mode:system&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>nativeTheme</span>.<span style=color:#a6e22e>themeSource</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;system&#39;</span>;
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @description ç»‘å®šä¸»è¿›ç¨‹å“åº”æ¸²æŸ“è¿›ç¨‹çš„é€šä¿¡
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ipcMain</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;login&#39;</span>, (<span style=color:#a6e22e>e</span>, <span style=color:#a6e22e>opt</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> { <span style=color:#a6e22e>msg</span>, <span style=color:#a6e22e>callback</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>opt</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>msg</span>, <span style=color:#a6e22e>callback</span>, <span style=color:#a6e22e>opt</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>callback</span><span style=color:#f92672>?</span>.();
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ipcMain</span>.<span style=color:#a6e22e>handle</span>(<span style=color:#e6db74>&#39;toMain&#39;</span>, (<span style=color:#a6e22e>callBack</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>callBack</span><span style=color:#f92672>?</span>.();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;æˆ‘æ˜¯mainçª—å£ï¼Œcreate window success&#39;</span>;
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @description å½“electronåˆå§‹åŒ–å®Œæˆçš„æ—¶å€™
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>whenReady</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>async</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>globalShortcut</span>.<span style=color:#a6e22e>register</span>(<span style=color:#e6db74>&#39;F12&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>webContents</span>.<span style=color:#a6e22e>fromId</span>(<span style=color:#a6e22e>windowIdMap</span>[<span style=color:#e6db74>&#39;default&#39;</span>])<span style=color:#f92672>?</span>.<span style=color:#a6e22e>openDevTools</span>();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createWindow</span>(<span style=color:#e6db74>&#39;default&#39;</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>isMac</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>showNotification</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @description å½“æ²¡æœ‰çª—å£æ‰“å¼€æ—¶ï¼Œåˆ™æ‰“å¼€ä¸€ä¸ªæ–°çª—å£ï¼ˆMacOSï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;activate&#39;</span>, <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>BrowserWindow</span>.<span style=color:#a6e22e>getAllWindows</span>().<span style=color:#a6e22e>length</span>) <span style=color:#a6e22e>createWindow</span>();
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @description å½“electronå…³é—­æ‰€æœ‰çª—å£æ—¶ï¼Œé€€å‡ºåº”ç”¨ã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;mainWindow-all-closed&#39;</span>, <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isWin</span>) <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>quit</span>();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div></p></details><h3 id=ä¿®æ”¹æ ¹ç›®å½•indexjs>ä¿®æ”¹æ ¹ç›®å½•<code>index.js</code></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./main/main.js&#39;</span>);
</span></span></code></pre></div><h3 id=ä¿®æ”¹æ ¹ç›®å½•packagejson>ä¿®æ”¹æ ¹ç›®å½•<code>package.json</code></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>æ‰¾åˆ°scripts,</span> <span style=color:#960050;background-color:#1e0010>æ·»åŠ startæŒ‡ä»¤</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;test&#34;</span>: <span style=color:#e6db74>&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;start&#34;</span>: <span style=color:#e6db74>&#34;electron .&#34;</span>
</span></span><span style=display:flex><span>}<span style=color:#960050;background-color:#1e0010>,</span>
</span></span></code></pre></div><h3 id=è¿è¡Œ-electron>è¿è¡Œ Electron</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>$ yarn start
</span></span></code></pre></div><h3 id=ç»†èŠ‚ä¿®æ”¹>ç»†èŠ‚ä¿®æ”¹</h3><blockquote><p>ç”±äº<code>main/main.js</code>æ˜¯ä¿®æ”¹è¿‡çš„ï¼Œå…¥å£å¢åŠ äº†æ˜¯å¦æ˜¯ development çš„åˆ¤æ–­(æ˜¯ï¼šæ‰“å¼€ http://localshost:8000, å¦ï¼šæ‰“å¼€ç¼–è¯‘å¥½çš„æ­£å¼åŒ…æ–‡ä»¶ä¸‹çš„ index.html)ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è°ƒæ•´<code>package.json</code>ï¼Œåœ¨<code>start</code>æŒ‡ä»¤ä¸­æ·»åŠ  ç›‘å¬ <code>http://localhost:8000</code> å¹¶å¯åŠ¨ Electron å®¢æˆ·ç«¯ã€‚
ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„<code>package.json</code></p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;elt:dev&#34;</span>: <span style=color:#e6db74>&#34;cross-env NODE_ENV=development electron .&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;start&#34;</span>: <span style=color:#e6db74>&#34;concurrently \&#34;npm run start:app\&#34; \&#34;wait-on http://localhost:8000 &amp;&amp; npm run elt:dev\&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;start:app&#34;</span>: <span style=color:#e6db74>&#34;cross-env APP_ROOT=./renderer umi dev&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>åœ¨è¿è¡Œ <code>yarn start</code>ä¹‹å‰ï¼Œå…ˆå®‰è£…å¯¹åº”çš„ä¾èµ–ã€‚å› ä¸ºæŒ‡ä»¤ä¸­ç”¨åˆ°äº†
<a href=https://www.npmjs.com/package/concurrently target=_blank>concurrently</a>
ä¸
<a href=https://www.npmjs.com/package/wait-on target=_blank>wait-on</a>
ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…ä¾èµ–(éœ€è¦å®‰è£…åˆ°<code>devDependencies</code>ä¸‹ï¼Œå› ä¸ºåœ¨åç»­çš„æ‰“åŒ…ä¸­ï¼ŒElectron ä¸ä¼šå°†<code>devDependencies</code>ä¸‹çš„ä¾èµ–æ‰“åŒ…è¿›å»ã€‚è¿›è€Œä¼˜åŒ–æ•´ä½“ä½“ç§¯)ã€‚</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>$ yarn add wait-on concurrently -D
</span></span></code></pre></div><h3 id=å†æ¬¡è¿è¡Œ-electron>å†æ¬¡è¿è¡Œ Electron</h3><pre tabindex=0><code>$ yarn start
</code></pre><h3 id=å®‰è£…electron-builder>å®‰è£…<code>electron-builder</code></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>$ yarn add electron-builder
</span></span></code></pre></div><h3 id=æ·»åŠ electron-builderé…ç½®>æ·»åŠ <code>electron-builder</code>é…ç½®</h3><p>æ–°å¢<code>electron-builder-config.js</code>ï¼ˆåå­—éšæ„èµ·ï¼‰ã€‚ä»…ä¾›å‚è€ƒã€‚å…·ä½“æŒ‰å®é™…åœºæ™¯ä¿®æ”¹</p><details><summary>ç‚¹å‡»æŸ¥çœ‹é…ç½®</summary><p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @description
</span></span></span><span style=display:flex><span><span style=color:#75715e> * electron-builderé…ç½®æ–‡ä»¶ï¼Œ ä½¿ç”¨æ—¶é€šè¿‡npmscript æŒ‡å®š--config æ¥åŒ¹é…è¿è¡Œ
</span></span></span><span style=display:flex><span><span style=color:#75715e> * eg(å½“å‰)ï¼š elctron-builder --config .config/electron-build-config.js
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>files</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e>// &#39;index.js&#39;, &#39;main/**/*&#39;, &#39;dist/**/*&#39;, &#39;node_modules/&#39;, &#39;package.json&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#e6db74>&#39;**/*&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;!release/**/*&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;!renderer/**/*&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;dist/**/*&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;static/**/*&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;!src/**/*&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#75715e>// &#34;!main/**/*&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  ],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>productName</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;demoApp&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// æ³¨å…¥æ‰“åŒ…åpackage.json å†…çš„å±æ€§
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>extraMetadata</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>main</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;index.js&#39;</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>directories</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;release/${version}&#39;</span>, <span style=color:#75715e>// ç¼–è¯‘æ–‡ä»¶è¾“å‡ºæ–‡ä»¶å¤¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  },
</span></span><span style=display:flex><span>  <span style=color:#75715e>// macæ‰“åŒ…é…ç½®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>mac</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// åŒ…ç±»å‹ï¼Œå‚è§ https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html#//apple_ref/doc/uid/TP40009250-SW8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// category: &#39;public.app-category.developer-tools&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;development&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>target</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;default&#39;</span>], <span style=color:#75715e>// ç›®æ ‡åŒ…ç±»å‹ï¼Œ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>dmg</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// background: &#39;build/appdmg.png&#39;, // dmgå®‰è£…çª—å£èƒŒæ™¯å›¾
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// icon: &#39;public/icon.icns&#39;, // å®¢æˆ·ç«¯å›¾æ ‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>iconSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span>, <span style=color:#75715e>// å®‰è£…å›¾æ ‡å¤§å°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// å®‰è£…çª—å£ä¸­åŒ…å«çš„é¡¹ç›®å’Œé…ç½®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>contents</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>      { <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>380</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>280</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;link&#39;</span>, <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Applications&#39;</span> },
</span></span><span style=display:flex><span>      { <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>110</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>280</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;file&#39;</span> },
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    window<span style=color:#f92672>:</span> { <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>500</span>, <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>500</span> }, <span style=color:#75715e>// å®‰è£…çª—å£å¤§å°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>linux</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>target</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;AppImage&#39;</span>, <span style=color:#e6db74>&#39;deb&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;build/icon.png&#39;</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>win</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>target</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;nsis&#39;</span>, <span style=color:#e6db74>&#39;portable&#39;</span>, <span style=color:#e6db74>&#39;squirrel&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;public/icon.ico&#39;</span>, <span style=color:#75715e>// å®¢æˆ·ç«¯å›¾æ ‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>nsis</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>shortcutName</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;demoApp&#39;</span>, <span style=color:#75715e>// å›¾æ ‡åç§°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>oneClick</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#75715e>// æ˜¯å¦ä¸€é”®å®‰è£…
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>allowElevation</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// å…è®¸è¯·æ±‚æå‡ã€‚ å¦‚æœä¸ºfalseï¼Œåˆ™ç”¨æˆ·å¿…é¡»ä½¿ç”¨æå‡çš„æƒé™é‡æ–°å¯åŠ¨å®‰è£…ç¨‹åºã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>allowToChangeInstallationDirectory</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// å…è®¸ä¿®æ”¹å®‰è£…ç›®å½•
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// installerIcon: &#34;./dist/public/icon.ico&#34;,// å®‰è£…å›¾æ ‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// uninstallerIcon: &#34;./dist/public/unist.ico&#34;,//å¸è½½å›¾æ ‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// installerHeaderIcon: &#34;./dist/public/icon.ico&#34;, // å®‰è£…æ—¶å¤´éƒ¨å›¾æ ‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>createDesktopShortcut</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// åˆ›å»ºæ¡Œé¢å›¾æ ‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>createStartMenuShortcut</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// åˆ›å»ºå¼€å§‹èœå•å›¾æ ‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  },
</span></span><span style=display:flex><span>  <span style=color:#75715e>// asar: {
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//   smartUnpack: true,  // asaræ‰“åŒ…, æ™ºèƒ½æå–ç¬¬ä¸‰æ–¹æ¨¡å—
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// },
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// asar: false,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>/* 
</span></span></span><span style=display:flex><span><span style=color:#75715e>  publish: [
</span></span></span><span style=display:flex><span><span style=color:#75715e>    {
</span></span></span><span style=display:flex><span><span style=color:#75715e>      provider: &#39;generic&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>      url: &#39;http://localhost/release/&#39;,//æ›´æ–°æœåŠ¡å™¨åœ°å€,è¯·æŒ‰å®é™…éƒ¨ç½²ä¿®æ”¹
</span></span></span><span style=display:flex><span><span style=color:#75715e>    },
</span></span></span><span style=display:flex><span><span style=color:#75715e>  ], */</span>
</span></span><span style=display:flex><span>};
</span></span></code></pre></div></p></details><h3 id=ä¿®æ”¹packagejson>ä¿®æ”¹<code>package.json</code></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span> <span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;elt:dev&#34;</span>: <span style=color:#e6db74>&#34;cross-env NODE_ENV=development electron .&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;start:app&#34;</span>: <span style=color:#e6db74>&#34;cross-env APP_ROOT=./renderer umi dev&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;start&#34;</span>: <span style=color:#e6db74>&#34;concurrently \&#34;npm run start:app\&#34; \&#34;wait-on http://localhost:8000 &amp;&amp; npm run elt:dev\&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;elt:dist&#34;</span>: <span style=color:#e6db74>&#34;umi electron-builder -p never&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;build:app&#34;</span>: <span style=color:#e6db74>&#34;cross-env APP_ROOT=./renderer umi build&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;elt:dist:all&#34;</span>: <span style=color:#e6db74>&#34;cross-env ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ electron-builder -mwl --config ./electron-builder-config.js&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;elt:dist:mac&#34;</span>: <span style=color:#e6db74>&#34;cross-env ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ electron-builder -m --config ./electron-builder-config.js&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;elt:dist:win&#34;</span>: <span style=color:#e6db74>&#34;cross-env ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ electron-builder -w --config ./electron-builder-config.js&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;elt:dist:linux&#34;</span>: <span style=color:#e6db74>&#34;cross-env ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ electron-builder -l --config ./electron-builder-config.js&#34;</span>
</span></span><span style=display:flex><span>  }<span style=color:#960050;background-color:#1e0010>,</span>
</span></span></code></pre></div><h3 id=æ‰§è¡Œç¼–è¯‘>æ‰§è¡Œç¼–è¯‘</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>$ yarn run elt:dist:mac
</span></span></code></pre></div><h3 id=é‡åˆ°çš„é—®é¢˜>é‡åˆ°çš„é—®é¢˜</h3><ol><li>åœ¨ç¼–è¯‘çš„æ—¶å€™æŠ¥ä»¥ä¸‹è¿™ä¸ªé”™
<code>Application entry file "/Users/mac/zones/electron-umi-template/release/mac/electron-app-template.app/Contents/Resources/app/index.js" does not exist. Seems like a wrong configuration.</code></li></ol><h3 id=è§£å†³æ–¹æ¡ˆ>è§£å†³æ–¹æ¡ˆ</h3><ol><li>æ€æ¥æƒ³å»ï¼Œå‘ç°æ˜¯æ–‡ä»¶å¤¹é‡åäº†ï¼ŒåŸæ¥æˆ‘çš„æ¸²æŸ“è¿›ç¨‹çš„æ–‡ä»¶å¤¹æ˜¯<code>app</code> ï¼Œè€Œ<code>electron-builder</code>æ‰“åŒ…å‡ºçš„å…¥å£æ–‡ä»¶å¤¹ä¹Ÿæ˜¯<code>app</code>ã€‚å°†æ–‡ä»¶å¤¹åå­—æ”¹æˆäº†<code>renderer</code>å°±è§£å†³äº†ã€‚</li></ol></article></div></div></div><aside class="column single-sidebar is-one-quarter"><div class=card><div class=card-info><div class=avatar><div class="image-wrapper ratio-1x1"><img src=/images/_avatar.jpg></div></div><div class=info><span class=info-name>WannTonn</span>
<span class=info-para>ä¸ºä»–äººæœŸå¾…è€Œæ´»æ‰æ˜¯å°ä¸‘ğŸ¤¡</span></div><div class=counter><div class=counter-wrapper><span class=counter-data>19</span>
<span class=counter-name>kWords</span></div><div class=counter-wrapper><span class=counter-data>10</span>
<span class=counter-name>Tags</span></div><div class=counter-wrapper><span class=counter-data>29</span>
<span class=counter-name>Posts</span></div></div></div></div><div class=sticky><div class="card toc hidden" id=table-of-contents><nav id=TableOfContents><ul><li><ul><li><a href=#ä½¿ç”¨-umi-åˆ›å»º-react-é¡¹ç›®æ­¤å¤„ä¸º-macos-ç¯å¢ƒ>ä½¿ç”¨ Umi åˆ›å»º React é¡¹ç›®(æ­¤å¤„ä¸º MacOS ç¯å¢ƒ)</a></li><li><a href=#å®‰è£…ä¾èµ–ä¸è¿è¡Œé¡¹ç›®>å®‰è£…ä¾èµ–ä¸è¿è¡Œé¡¹ç›®</a></li><li><a href=#å‡†å¤‡å®‰è£…-electron>å‡†å¤‡å®‰è£… Electron</a></li><li><a href=#ä¿®æ”¹æ ¹ç›®å½•indexjs>ä¿®æ”¹æ ¹ç›®å½•<code>index.js</code></a></li><li><a href=#ä¿®æ”¹æ ¹ç›®å½•packagejson>ä¿®æ”¹æ ¹ç›®å½•<code>package.json</code></a></li><li><a href=#è¿è¡Œ-electron>è¿è¡Œ Electron</a></li><li><a href=#ç»†èŠ‚ä¿®æ”¹>ç»†èŠ‚ä¿®æ”¹</a></li><li><a href=#å†æ¬¡è¿è¡Œ-electron>å†æ¬¡è¿è¡Œ Electron</a></li><li><a href=#å®‰è£…electron-builder>å®‰è£…<code>electron-builder</code></a></li><li><a href=#æ·»åŠ electron-builderé…ç½®>æ·»åŠ <code>electron-builder</code>é…ç½®</a></li><li><a href=#ä¿®æ”¹packagejson>ä¿®æ”¹<code>package.json</code></a></li><li><a href=#æ‰§è¡Œç¼–è¯‘>æ‰§è¡Œç¼–è¯‘</a></li><li><a href=#é‡åˆ°çš„é—®é¢˜>é‡åˆ°çš„é—®é¢˜</a></li><li><a href=#è§£å†³æ–¹æ¡ˆ>è§£å†³æ–¹æ¡ˆ</a></li></ul></li></ul></nav></div></div></aside></div></div></main><footer class=footer><div class=container><span>Copyright &copy; 2020-2023 WannTonn</span>
<span>Original theme <a href=https://github.com/amzrk2/hugo-template-aofuji target=_blank>Aofuji</a> with Apache-2.0 license</span></div></footer><script defer src=/assets/amzrk2-common.min.js></script>
<script defer src=/assets/amzrk2-single.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.21.0/components/prism-core.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.21.0/plugins/autoloader/prism-autoloader.min.js></script></body></html>