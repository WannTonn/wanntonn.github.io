<!doctype html><html lang=en>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=HandheldFriendly content="True">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=generator content="Hugo 0.88.1">
<link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png>
<link rel=manifest href=/favicons/site.webmanifest>
<link rel="shortcut icon" href=/favicons/favicon.ico>
<title>Electronå­¦ä¹ ç¬”è®° - {...Life}</title><meta name=author content="WannTonn"><meta name=keywords content="Electron">
<meta property="og:title" content="Electronå­¦ä¹ ç¬”è®°">
<meta property="og:description" content>
<meta property="og:type" content="article">
<meta property="og:url" content="https://blogs.wanntonn.fun/fed/electron/notes/">
<meta property="og:image" content="https://blogs.wanntonn.fun/images/Post/Electron/bg.jpg"><meta property="article:published_time" content="2022-02-14T11:30:45+08:00">
<meta property="article:modified_time" content="2022-02-14T11:30:45+08:00"><meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blogs.wanntonn.fun/images/Post/Electron/bg.jpg">
<meta name=twitter:title content="Electronå­¦ä¹ ç¬”è®°">
<meta name=twitter:description content>
<link rel=stylesheet href=/assets/amzrk2.min.css>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-000000000-0"></script>
<script></script>
<body data-theme=auto data-section=single>
<script>!function(b){let a;try{a=JSON.parse(localStorage.getItem("amzrk2-theme"))}catch(b){a=null}a&&a!==b&&document.body.setAttribute("data-theme",a)}(document.body.getAttribute("data-theme"))</script>
<div id=top style=height:0;overflow:hidden></div>
<header>
<nav class=navbar>
<div class=container>
<div class=navbar-brand>
<a class=navbar-item href=https://blogs.wanntonn.fun>
{...Life}
</a>
</div>
<div class=navbar-menu>
<div class=navbar-start>
<a class=navbar-item href=/post/>
ç¬”è®°
</a>
<a class=navbar-item href=/nas/>
NAS
</a>
<a class=navbar-item href=/fed/>
å‰ç«¯
</a>
<a class=navbar-item href=/tags/>
æ ‡ç­¾
</a>
<a class=navbar-item href=/about/>
å…³äº
</a>
</div>
<div class=navbar-end>
<div class=navbar-item id=ctrl-adjust><svg class="icon" aria-hidden="true"><use xlink:href="#icon-adjust"/></svg>
</div>
<a class=navbar-item id=ctrl-rss href=/index.xml target=_blank><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss"/></svg>
</a>
<div class=navbar-item id=ctrl-toc><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bars"/></svg>
</div>
</div>
</div>
</nav>
</header>
<main>
<div class="container single-container">
<div class="columns single-columns">
<div class="column single-content is-three-quarters">
<div class=card>
<div class="post-image image-wrapper ratio-32x9">
<img src=/images/Post/Electron/bg.jpg>
</div>
<div class=post-box>
<h2 class=post-title>Electronå­¦ä¹ ç¬”è®°</h2>
<div class=post-meta>
<span>
<svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-day"/></svg>&nbsp;<time>2022-02-14</time></span>
<span>
<svg class="icon" aria-hidden="true"><use xlink:href="#icon-clock"/></svg>&nbsp;3 min</span>
<span>
<svg class="icon" aria-hidden="true"><use xlink:href="#icon-hashtag"/></svg>&nbsp;<a href=/tags/electron>Electron</a></span>
</div>
</div>
<div class=post-content>
<article class="markdown content">
<h2 id=å®‰è£…-electron>å®‰è£… Electron</h2>
<h3 id=åœ¨é¡¹ç›®ä¸­æƒ³å®‰è£…-electronè¿è¡Œnpm-install-electron--d-çš„æ—¶å€™ä¸€ç›´å¡è¿›åº¦æ¡æˆ–è€…ä¸‹è½½ååˆ†ç¼“æ…¢å¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•è§£å†³>åœ¨é¡¹ç›®ä¸­æƒ³å®‰è£… Electronï¼Œè¿è¡Œ<code>npm install electron -D</code> çš„æ—¶å€™ï¼Œä¸€ç›´å¡è¿›åº¦æ¡ï¼Œæˆ–è€…ä¸‹è½½ååˆ†ç¼“æ…¢ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•è§£å†³ã€‚</h3>
<ul>
<li>Ctrl + cï¼Œåœæ­¢å½“å‰å®‰è£…ã€‚</li>
<li>åˆ° Electron çš„å›½å†…é•œåƒå»å¯»æ‰¾ä¸é¡¹ç›®ç‰ˆæœ¬ä¸€è‡´çš„äºŒè¿›åˆ¶é•œåƒåŒ…ï¼Œ
<a href=https://npm.taobao.org/mirrors/electron/ target=_blank>åœ°å€</a>
ï¼Œè¿™é‡Œæˆ‘å°†ä¸‹è½½å½“å‰æœ€æ–°çš„<code>17.1.0</code>ç‰ˆæœ¬åšç¤ºèŒƒï¼Œ
<a href=https://registry.npmmirror.com/-/binary/electron/17.1.0/electron-v17.1.0-darwin-x64.zip target=_blank>é•œåƒåœ°å€</a>
ã€‚</li>
<li>å°†<code>electron-v17.1.0-darwin-x64.zip</code>æ–‡ä»¶ä¸‹è½½å®Œæˆä¹‹åï¼Œæ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°<code>node_modules/electron/</code>æ–‡ä»¶å¤¹ï¼Œå°†åˆšæ‰ä¸‹è½½å¥½çš„äºŒè¿›åˆ¶å‹ç¼©åŒ…æ–‡ä»¶<code>electron-v17.1.0-darwin-x64.zip</code>å¤åˆ¶åˆ°<code>node_modules/electron/</code>ä¸‹ã€‚</li>
<li>æ‰¾åˆ°<code>node_modules/electron/install.js</code>ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶è¿›è¡Œç¼–è¾‘</li>
<li>æ‰¾åˆ°æ–‡ä»¶ç¬¬ 22 è¡Œå·¦å³çš„ä½ç½®ï¼Œæ‰¾åˆ°<code>downloadArtifact</code>æ–¹æ³•ï¼Œå°†å…¶æ³¨é‡Šï¼Œå…·ä½“å¯ä»¥çœ‹ä»¥ä¸‹ä»£ç </li>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=color:#75715e>/* downloadArtifact({
</span><span style=color:#75715e>version,
</span><span style=color:#75715e>artifactName: &#39;electron&#39;,
</span><span style=color:#75715e>force: process.env.force_no_cache === &#39;true&#39;,
</span><span style=color:#75715e>cacheRoot: process.env.electron_config_cache,
</span><span style=color:#75715e>platform: process.env.npm_config_platform || process.platform,
</span><span style=color:#75715e>arch: process.env.npm_config_arch || process.arch
</span><span style=color:#75715e>}).then(extractFile).catch(err =&gt; {
</span><span style=color:#75715e>console.error(err.stack);
</span><span style=color:#75715e>process.exit(1);
</span><span style=color:#75715e>}); */</span>
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>path_</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>join</span>(<span style=color:#ae81ff>__</span><span style=color:#a6e22e>dirname</span>, <span style=color:#e6db74>&#39;electron-v17.1.0-darwin-x64.zip&#39;</span>); <span style=color:#75715e>// æŒ‡å®šäºŒè¿›åˆ¶å‹ç¼©æ–‡ä»¶è·¯å¾„
</span><span style=color:#75715e></span><span style=color:#a6e22e>extractFile</span>(<span style=color:#a6e22e>path_</span>); <span style=color:#75715e>// å°†äºŒè¿›åˆ¶å‹ç¼©æ–‡ä»¶è·¯å¾„è¿›è¡Œè§£å‹æ“ä½œ
</span></code></pre></div></li>
<li>åœ¨æ§åˆ¶å°æ•²å…¥ä»¥ä¸‹ä»£ç ï¼Œå›è½¦å³å¯å®Œæˆç¦»çº¿å®‰è£…ã€‚</li>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell>node node_modules/electron/install.js
</code></pre></div></li>
<li>çœ‹åˆ°<code>node_modules/electron/dist</code> å’Œ <code>node_modules/electron/path.txt</code> å°±ä»£è¡¨å®‰è£…æˆåŠŸã€‚</li>
</ul>
<h2 id=electron-store>Electron-Store</h2>
<h3 id=èƒŒæ™¯electron-store>èƒŒæ™¯ï¼ˆelectron-storeï¼‰</h3>
<blockquote>
<p>é¡¹ç›®ç”¨çš„æ˜¯ Electron å¼€å‘ï¼ŒåŸæ¥æ•°æ®æ˜¯æ”¾åœ¨ Electronï¼ˆå³ Chromeï¼‰çš„ Storage ä¸‹ï¼Œè€Œ APP éœ€è¦ä¸Šçº¿ App Storeï¼Œæ‰€ä»¥è¯¥åº”ç”¨ä¸ºæ²™ç›’åº”ç”¨ï¼Œåœ¨ App Store æ›´æ–°çš„æ—¶å€™ï¼Œæœ‰å‡ ç‡ä¼šå°† Electron çš„ RootPath ä¸‹çš„æ‰€æœ‰æ–‡ä»¶è¦†å†™ï¼Œå°±ä¼šå¯¼è‡´ Storage æ•°æ®ä¸¢å¤±ï¼Œæ‰€ä»¥é‡‡ç”¨ Electron-Store æ–¹æ¡ˆï¼Œå°†éœ€è¦ç¼“å­˜çš„æ•°æ®å†™å…¥ç£ç›˜ã€‚</p>
</blockquote>
<h3 id=é‡åˆ°çš„é—®é¢˜electron-store>é‡åˆ°çš„é—®é¢˜ï¼ˆelectron-storeï¼‰</h3>
<ul>
<li>é¡¹ç›®ä¸­å¼•ç”¨<code>electron-store</code>ï¼Œé¡¹ç›®è¿è¡Œèµ·æ¥ä¹‹åï¼Œæ§åˆ¶å°æŠ¥é”™ï¼ŒæŠ¥é”™å†…å®¹<code>WebContents #1 called ipcRenderer.sendSync() with 'electron-store-get-data' channel without listeners.</code></li>
<li>electro-store ç”Ÿæˆçš„æ–‡ä»¶å­˜æ”¾è·¯å¾„çš„é—®é¢˜ã€‚</li>
</ul>
<h3 id=åˆ†æ>åˆ†æ</h3>
<ul>
<li>åˆå§‹åŒ–æŠ¥é”™æ˜¯ç”±äº&mldr;æ–‡æ¡£æ²¡çœ‹å®Œï¼Œåº•ä¸‹æœ‰å¼ºè°ƒè¦åœ¨ä¸»è¿›ç¨‹è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
<li>MacOS ä¸Šçš„åº”ç”¨æ¥æºåˆ†ä¸º App Store å•†åº—ä¸‹è½½ä¸æ‰“åŒ…æˆ<code>.dmg</code>é•œåƒçš„å‹ç¼©åŒ…(è§£å‹åˆ° Applications/ æˆ–ä»»æ„æ–‡ä»¶å¤¹å°±å¯ä»¥è¿è¡Œ)ä¸æ‰“åŒ…æˆ <code>.pkg</code>çš„æ‰§è¡Œå®‰è£…çš„å®‰è£…åŒ…æ–‡ä»¶ ç­‰ã€‚App Store ä¸‹è½½çš„åº”ç”¨éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ²™ç›’ç¨‹åºï¼ˆéœ€è¦ä¸Šæ¶åˆ° App Store å°±éœ€è¦æ‰“å¼€æ²™ç›’ï¼‰,å…·ä½“å¯å‚è€ƒ
<a href=https://developer.apple.com/cn/app-store/review/guidelines/ target=_blank>Apple Store å®¡æ ¸æŒ‡å—</a>
ã€‚è¨€å½’æ­£ä¼ ï¼Œå¼ºè°ƒæ²™ç›’ç¨‹åºå°±æ˜¯å› ä¸ºå¼€å¯äº†æ²™ç›’ä¹‹åï¼Œç¨‹åºï¼ˆElectronï¼‰é»˜è®¤çš„ä½ç½®(app.getPath(&lsquo;appData&rsquo;))å°±ä¼šåœ¨ <code>~/Library/Containers/appName/Data/Library/Application Support/appName/</code>ï¼Œè€Œéæ²™ç›’åº”ç”¨çš„è·¯å¾„æ˜¯åœ¨<code>~/Library/Application Support/appName/</code>ã€‚è¦è§„é¿ Electron åº”ç”¨å› ä¸ºæ›´æ–°å¯¼è‡´æ•°æ®è¢«è¦†ç›–ï¼Œå¯ä»¥åˆ©ç”¨æ²™ç›’ä¸‹çš„è·¯å¾„ï¼Œå°†æ•°æ®æ”¾ç½®åœ¨ä¸<code>appName</code>åŒçº§ã€‚</li>
</ul>
<h3 id=è§£å†³æ–¹æ³•electron-store>è§£å†³æ–¹æ³•ï¼ˆelectron-storeï¼‰</h3>
<ul>
<li>
<p>è§£å†³åˆå§‹åŒ–æŠ¥é”™ã€‚åœ¨ä¸»è¿›ç¨‹ä¸­ä»£ç å†™å…¥ä»¥ä¸‹åˆå§‹åŒ–ä»£ç </p>
</li>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=color:#75715e>// main.js
</span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ElectronStore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;electron-store&#39;</span>);
<span style=color:#a6e22e>ElectronStore</span>.<span style=color:#a6e22e>initRenderer</span>();
</code></pre></div></li>
<li>
<p>ä¿®æ”¹ electron-store æ–‡ä»¶å­˜æ”¾è·¯å¾„</p>
</li>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=color:#75715e>// åˆå§‹åŒ–storeçš„æ—¶å€™ï¼Œä¿®æ”¹cwdå­—æ®µçš„é…ç½®
</span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Store</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;electron-store&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>path</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;path&#39;</span>;

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>store</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Store</span>({
  <span style=color:#a6e22e>cwd</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>join</span>(
    <span style=color:#e6db74>&#39;/Users/mac/Library/Containers/appName/Data/Library/Application Support/&#39;</span>,
    <span style=color:#e6db74>&#39;appData&#39;</span>
  ), <span style=color:#75715e>// è¿™é‡Œéœ€è¦ä»¥å®é™…åœ¨main.js ä¸­è·å–åˆ°çš„pathä¸ºå‡†ï¼ˆapp.getPath(&#39;appData&#39;)ï¼‰;
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;cacheData&#39;</span>, <span style=color:#75715e>// é‡æ–°å‘½åé…ç½®æ–‡ä»¶åå­—ï¼Œè‡ªè¡Œä¿®æ”¹
</span><span style=color:#75715e></span>});
</code></pre></div></li>
</ul>
</article>
</div>
</div>
</div>
<aside class="column single-sidebar is-one-quarter">
<div class=card>
<div class=card-info>
<div class=avatar>
<div class="image-wrapper ratio-1x1">
<img src=/images/_avatar.jpg>
</div>
</div>
<div class=info>
<span class=info-name>WannTonn</span>
<span class=info-para>ä¸ºä»–äººæœŸå¾…è€Œæ´»æ‰æ˜¯å°ä¸‘ğŸ¤¡</span>
</div>
<div class=counter>
<div class=counter-wrapper>
<span class=counter-data>9</span>
<span class=counter-name>kWords</span>
</div>
<div class=counter-wrapper>
<span class=counter-data>9</span>
<span class=counter-name>Tags</span>
</div>
<div class=counter-wrapper>
<span class=counter-data>20</span>
<span class=counter-name>Posts</span>
</div>
</div>
</div>
</div>
<div class=sticky>
<div class="card toc hidden" id=table-of-contents>
<nav id=TableOfContents>
<ul>
<li><a href=#å®‰è£…-electron>å®‰è£… Electron</a>
<ul>
<li><a href=#åœ¨é¡¹ç›®ä¸­æƒ³å®‰è£…-electronè¿è¡Œnpm-install-electron--d-çš„æ—¶å€™ä¸€ç›´å¡è¿›åº¦æ¡æˆ–è€…ä¸‹è½½ååˆ†ç¼“æ…¢å¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•è§£å†³>åœ¨é¡¹ç›®ä¸­æƒ³å®‰è£… Electronï¼Œè¿è¡Œ<code>npm install electron -D</code> çš„æ—¶å€™ï¼Œä¸€ç›´å¡è¿›åº¦æ¡ï¼Œæˆ–è€…ä¸‹è½½ååˆ†ç¼“æ…¢ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•è§£å†³ã€‚</a></li>
</ul>
</li>
<li><a href=#electron-store>Electron-Store</a>
<ul>
<li><a href=#èƒŒæ™¯electron-store>èƒŒæ™¯ï¼ˆelectron-storeï¼‰</a></li>
<li><a href=#é‡åˆ°çš„é—®é¢˜electron-store>é‡åˆ°çš„é—®é¢˜ï¼ˆelectron-storeï¼‰</a></li>
<li><a href=#åˆ†æ>åˆ†æ</a></li>
<li><a href=#è§£å†³æ–¹æ³•electron-store>è§£å†³æ–¹æ³•ï¼ˆelectron-storeï¼‰</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</aside>
</div>
</div>
</main>
<footer class=footer>
<div class=container>
<span>Copyright &copy; 2020-2022 WannTonn</span>
<span>Original theme <a href=https://github.com/amzrk2/hugo-template-aofuji target=_blank>Aofuji</a> with Apache-2.0 license</span>
</div>
</footer>
<script defer src=/assets/amzrk2-common.min.js></script>
<script defer src=/assets/amzrk2-single.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.21.0/components/prism-core.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.21.0/plugins/autoloader/prism-autoloader.min.js></script>
</body>
</html>